<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OfferIQ â€” CareerOS</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<header>
  <a href="{{ url_for('index') }}" style="text-decoration:none">
    <div class="logo">Career<span>OS</span><span class="sub-label">OfferIQ</span></div>
  </a>
  <div class="breadcrumb">
    <a href="{{ url_for('index') }}" style="color:var(--muted);text-decoration:none">CareerOS</a>
    <span class="sep">â€º</span>
    <span class="crumb-current">OfferIQ</span>
  </div>
  <nav>
    <a class="nav-link hide-mobile" href="{{ url_for('offeriq') }}" style="color:var(--accent)">OfferIQ</a>
    <a class="nav-link hide-mobile" href="{{ url_for('placement') }}">Placement</a>
    <a class="nav-link hide-mobile" href="{{ url_for('interview') }}">Interview</a>
    <a class="nav-link hide-mobile" href="{{ url_for('resume') }}">Resume</a>
    <a class="nav-cta" href="{{ url_for('index') }}">â† Home</a>
  </nav>
</header>

<div class="sub-hero">
  <div class="sub-hero-left">
    <div class="sub-hero-badge cyan"><span class="pulse"></span> offeriq.careeros.ai</div>
    <h1>Rank Every<br>Offer with<br><em style="color:var(--accent)">Precision</em></h1>
    <p>6-criteria AI scoring engine. Add multiple offers, compare side-by-side, and let the decision engine surface your best option with full transparency.</p>
  </div>
  <div class="sub-hero-stats">
    <div class="sh-stat"><div class="sv" style="color:var(--accent)">98.3%</div><div class="sl">Accuracy</div></div>
    <div class="sh-stat"><div class="sv" style="color:var(--accent3)">6</div><div class="sl">Criteria</div></div>
    <div class="sh-stat"><div class="sv" style="color:var(--gold)">&lt;2s</div><div class="sl">Analysis</div></div>
  </div>
</div>

<div class="sub-content">
  <div class="section-label">// AI Analyzer</div>
  <div class="section-title">Offer Analysis System</div>
  <div class="section-sub">Add your offers one by one, then hit Analyze All to rank them together.</div>

  <div class="system-layout">

    <!-- CHAT PANEL -->
    <div class="chat-panel">
      <div class="chat-header">
        <div class="chat-avatar">IQ</div>
        <div class="chat-header-info">
          <h4>OfferIQ Assistant</h4>
          <p>â— ONLINE â€” Decision Engine Ready</p>
        </div>
        <div class="online-dot"></div>
      </div>
      <div class="chat-messages" id="chatMessages"></div>
      <div class="quick-prompts">
        <button class="qp" onclick="sendQuick('Rank by growth potential')">Growth</button>
        <button class="qp" onclick="sendQuick('Evaluate work life balance')">WLB</button>
        <button class="qp" onclick="sendQuick('Assess layoff rate risk')">Layoff risk</button>
        <button class="qp" onclick="sendQuick('Compare bond duration')">Bond</button>
        <button class="qp" onclick="sendQuick('How is CTC scored')">CTC scoring</button>
      </div>
      <div class="chat-input-area">
        <input type="text" class="chat-input" id="chatInput" placeholder="Ask about any criteria...">
        <button class="send-btn" onclick="sendMessage()">â†‘</button>
      </div>
    </div>

    <!-- FORM + RESULTS PANEL -->
    <div class="analysis-panel">

      <div class="card">
        <h3>Add Offer for Analysis</h3>
        <p class="sub">// Fill in offer parameters for the decision engine</p>
        <form id="offerForm" onsubmit="return false;">
        <div class="form-grid">
          <div class="form-group full">
            <label>Company Name</label>
            <input type="text" id="offerName" placeholder="e.g. Google, TCS, Startup Inc." required>
          </div>
          <div class="form-group full">
            <label>CTC (Annual, Numeric)</label>
            <input type="number" id="ctc" min="0" step="1" placeholder="e.g. 1200000" required
            oninvalid="this.setCustomValidity('CTC must be a positive whole number')"
       oninput="this.setCustomValidity('')">
          </div>
          <div class="form-group">
            <label>Growth Potential</label>
            <select id="growth_potential" required>
              <option value="">Select...</option>
              <option value="1">1 â€” Very Low</option>
              <option value="2">2 â€” Low</option>
              <option value="3">3 â€” Moderate</option>
              <option value="4">4 â€” High</option>
              <option value="5">5 â€” Very High</option>
            </select>
          </div>
          <div class="form-group">
            <label>Work-Life Balance</label>
            <select id="wlb" required>
              <option value="">Select...</option>
              <option value="1">1 â€” Poor</option>
              <option value="2">2 â€” Below Average</option>
              <option value="3">3 â€” Average</option>
              <option value="4">4 â€” Good</option>
              <option value="5">5 â€” Excellent</option>
            </select>
          </div>
          <div class="form-group">
  <label>Layoff Rate (%)</label>
  <input type="number" id="layoff_rate" min="0" max="100" step="1" placeholder="e.g. 5" required>
  <span id="layoffError" style="display:none;font-size:.65rem;color:#f87171;margin-top:4px;">
    âš  Layoff rate must be between 0 and 100
  </span>
</div>
          <div class="form-group">
            <label>Bond Duration (months)</label>
            <input type="number" id="bond_duration" min="0" step="1"placeholder="e.g. 12" required
          oninvalid="this.setCustomValidity('Bond duration must be 0 or a positive whole number')"
       oninput="this.setCustomValidity('')">
          </div>
          <div class="form-group full">
            <label>Location Preference</label>
            <select id="location">
              <option value="">Select...</option>
              <option value="1">1 â€” Not Preferred</option>
              <option value="2">2 â€” Slightly Preferred</option>
              <option value="3">3 â€” Neutral</option>
              <option value="4">4 â€” Preferred</option>
              <option value="5">5 â€” Highly Preferred</option>
            </select>
          </div>
        </div>
        </form>
        <!-- ADD OFFER â€” saves to queue, no scoring yet -->
        <button class="analyze-btn" id="addBtn" onclick="addOffer()"
          style="background:var(--surface);border:1px solid var(--border);color:var(--fg);margin-bottom:10px;">
          + Add Offer
        </button>

        <!-- ANALYZE ALL â€” hidden until at least 1 offer is added -->
        <button class="analyze-btn" id="analyzeAllBtn" onclick="analyzeAll()"
          style="display:none;">
          âš¡ Analyze All Offers
        </button>

        <div id="offerHint" style="display:none; margin-top:10px; padding:9px 13px;
             background:rgba(0,229,255,.06); border:1px solid rgba(0,229,255,.15);
             border-radius:3px; font-size:.7rem; color:var(--accent); align-items:center; gap:8px;">
          <span>âœ“</span><span id="offerHintText"></span>
        </div>
      </div>

      <div class="card">
        <div class="results-header">
          <h3>Ranked Offers</h3>
          <div style="display:flex;align-items:center;gap:10px">
            <span class="results-meta" id="resultsMeta">Awaiting analysis...</span>
            <button id="clearAllBtn" onclick="clearAllOffers()"
              style="display:none;background:transparent;border:1px solid var(--border);
                     color:var(--muted);padding:3px 9px;font-family:'IBM Plex Mono',monospace;
                     font-size:.6rem;border-radius:2px;cursor:pointer;text-transform:uppercase;">
              âœ• Clear
            </button>
          </div>
        </div>
        <div id="offerCountBar"
             style="display:none;margin-bottom:14px;padding:7px 13px;
                    background:var(--surface);border:1px solid var(--border);
                    border-radius:3px;font-size:.68rem;color:var(--muted);
                    justify-content:space-between;align-items:center;">
          <span>ğŸ“Š <span id="offerCount">0</span> offer(s) in comparison</span>
          <span style="color:var(--accent);font-size:.62rem;">CTC auto-normalizes on each add</span>
        </div>
        <div id="rankingList">
          <div class="empty-state">No offers yet â€” add your first offer above.</div>
        </div>
      </div>

    </div>
  </div>

  <!-- Factor weight bars -->
  <div class="factors-card">
    <h3>Decision Engine â€” Factor Weights</h3>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:8px" id="factorBars"></div>
  </div>

  <!-- Scoring criteria -->
  <div style="margin-top:48px">
    <div class="section-label">// Scoring Criteria</div>
    <div class="section-title" style="margin-bottom:32px">How Each Factor Scores</div>
    <div class="feat-grid">
      <div class="feat-cell"><div class="feat-num">01</div><div class="feat-icon">ğŸ’°</div><h4>CTC</h4><p>25 pts max. Min-max normalized across all offers. Highest CTC = 25 pts, lowest = 0, others scaled proportionally.</p></div>
      <div class="feat-cell"><div class="feat-num">02</div><div class="feat-icon">ğŸš€</div><h4>Growth Potential</h4><p>28 pts max. Rated 1â€“5: Very High = 28, High = 22, Moderate = 15, Low = 8, Very Low = 2 pts.</p></div>
      <div class="feat-cell"><div class="feat-num">03</div><div class="feat-icon">âš–ï¸</div><h4>Work-Life Balance</h4><p>20 pts max. Rated 1â€“5: Excellent = 20, Good = 16, Average = 11, Below Avg = 6, Poor = 1 pt.</p></div>
      <div class="feat-cell"><div class="feat-num">04</div><div class="feat-icon">ğŸ“‰</div><h4>Layoff Rate</h4><p>15 pts max, inversely scored. 0â€“5% = 15, 6â€“15% = 11, 16â€“30% = 7, 31â€“50% = 3, 50%+ = 1 pt.</p></div>
      <div class="feat-cell"><div class="feat-num">05</div><div class="feat-icon">ğŸ”—</div><h4>Bond Duration</h4><p>10 pts max, inversely scored. No bond = 10, 1â€“6mo = 8, 7â€“12mo = 6, 13â€“24mo = 3, 24+mo = 1 pt.</p></div>
      <div class="feat-cell"><div class="feat-num">06</div><div class="feat-icon">ğŸ“</div><h4>Location Preference</h4><p>12 pts max. Rated 1â€“5: Highly Preferred = 12, Preferred = 9, Neutral = 6, Slightly = 3, Not Pref = 0.</p></div>
    </div>
  </div>
</div>

<footer>
  <div class="logo">Offer<span>IQ</span></div>
  <p>Part of CareerOS â€” <a href="{{ url_for('index') }}" style="color:var(--accent)">â† Back to Hub</a></p>
  <p>Â© 2026 CareerOS</p>
</footer>

<script src="{{ url_for('static', filename='offeriq.js') }}"></script>
</body>
</html>
